<html>

<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, user-scalable=no">
    <script language="javascript" src="lib/vector.js"></script>
    <script language="javascript" src="lib/matrix.js"></script>
    <script language="javascript" src="lib/drawbase.js"></script>
    <script language="javascript" src="lib/PhysicsObject.js"></script>
    <script language="javascript" src="lib/DomObject.js"></script>
    <script language="javascript" src="lib/Character.js"></script>
    <script language="javascript" src="lib/collisioncontainer.js"></script>
    <script language="javascript" src="lib/eventemitter.js"></script>
    <title>Artem's Word Train</title>
</head>
<style type="text/css">
#gamearea{
    height:90vh;
    width:100wh;
    border: solid black 3px !important;
    border-radius:3px;
}
</style>

<body>
<button id="btn1">btn1</button>
<button id="btn2">btn2</button>
<button id="btn3">btn3</button>
<button id="btn4">btn4</button>

<script type="text/javascript">
let GAMEBOARD = new Rectangle(width*.02,height*.1,width*.94,height*.8).asOutline("black");
GAMEBOARD.shape.id = "gamearea";
let player_num = 4;
let players = {};

for(let i = 0; i>-10;i--){
   let n = 5 + i
   console.log(n%5)

}


class Player{
    constructor(id){
        this.INTERNAL_ID = id;
        this.powers = []
        this.INTERNAL_NAME = "no name"
    }
    get name(){
        return 'Player ' + (this.INTERNAL_ID + 1);
    }
    set name(string){
        this.INTERNAL_NAME = string
    }
    get id(){
        return this.INTERNAL_ID;
    }
}

class PlayerHandler{
    constructor(NumberOfPlayers){
        this.players = Array(NumberOfPlayers).fill(0).map((x,i)=>new Player(i))
        this.active_players = this.players.map(x=>x.id)
        this.inactive_players = []
    }
    getById(id){
        let player = this.players.filter(x=>x.id === id);
        if(player.length === 1) return player[0];
    }
    remove(id){
        this.active_players.splice(this.active_players.indexOf(id),1)
        this.inactive_players.push(id)
    }
    getNext(id){
       let index = this.active_players.indexOf(id)
       index += 1
       index %= this.active_players.length
       return this.getById(this.active_players[index])
    }
    getPrev(id){
       let index = this.active_players.indexOf(id)
       index == 0? index = this.active_players.length-1 : index -=1
       index %= this.active_players.length
       return this.getById(this.active_players[Math.abs(index)])
    }
}


function createPlayers(num){
   players = new PlayerHandler(num)
}
createPlayers(player_num);
players.remove(1)
let stats = {
    players: player_num,
    direction: -1,
    powers_on: true,
    timer_on: true,
    hard_timer: false,
    current_turn:0,
};
function nextTurn(){
     let plyr = {}
     if(stats.direction>0){
         plyr = players.getNext(stats.current_turn)
     }else{
         plyr = players.getPrev(stats.current_turn)
     }
     stats.current_turn = plyr.id
     console.log(plyr.name + '\'s turn')
}
id('btn4').innerText = 'next turn';
id('btn4').addEventListener('click',nextTurn);



</script>
</body>